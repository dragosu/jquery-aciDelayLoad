
/*
 * aciDelayLoad jQuery Plugin v1.0
 * http://acoderinsights.ro
 *
 * Copyright (c) 2012 Dragos Ursu
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Require jQuery Library http://jquery.com
 *
 * Date: Wed Nov 21 16:20 2012 +0200
 */

(function(a){a.aciDelayLoad={nameSpace:".aciDelayload"};a.fn.aciDelayLoad=function(b,c){if(typeof b=="string"){return a(this)._aciDelayLoad(b,c)}return this.each(function(){return a(this)._aciDelayLoad(b,c)})};a.fn.aciDelayLoad.defaults={fadeIn:0.1,duration:200,easing:"linear",dataSrc:"data-src",dataBlank:"data-blank"};a.fn._aciDelayLoad=function(n,e){var j=this;var l=a.extend({},a.fn.aciDelayLoad.defaults,n);var c=function(p){var o=document.documentElement;var q=p.getBoundingClientRect();return(q&&(q.bottom>=0)&&(q.right>=0)&&(q.top<=o.clientHeight)&&(q.left<=o.clientWidth))};var g=function(){j.find("img["+l.dataSrc+"]").each(function(){var o=a(this);if(c(this)){o.attr(l.dataBlank,o.attr("src"));if(l.fadeIn){o.fadeTo(0,l.fadeIn).attr("src",o.attr(l.dataSrc)).fadeTo(l.duration,1,l.easing)}else{o.attr("src",o.attr(l.dataSrc))}o.attr(l.dataSrc,null)}})};var i=null;var m=function(o){d();j.bind("scroll"+a.aciDelayLoad.nameSpace,g);if(j.get(0)==document){a(window).bind("resize"+a.aciDelayLoad.nameSpace,function(){if(i){window.clearTimeout(i)}i=window.setTimeout(g,50)})}};var d=function(){j.unbind("scroll"+a.aciDelayLoad.nameSpace);if(j.get(0)==document){a(window).unbind("resize"+a.aciDelayLoad.nameSpace)}};var b=function(){j.find("img["+l.dataBlank+"]").each(function(){var o=a(this);o.attr(l.dataSrc,o.attr("src")).attr("src",o.attr(l.dataBlank));o.attr(l.dataBlank,null)})};var k=function(){if((typeof n=="undefined")||(typeof n=="object")){j.data("options"+a.aciDelayLoad.nameSpace,l);h()}if(typeof n=="string"){if(j.data("customUi"+a.aciDelayLoad.nameSpace)){switch(n){case"enable":m();break;case"disable":d();break;case"revert":b();break;case"options":return j.data("options"+a.aciDelayLoad.nameSpace);case"destroy":f()}}else{switch(n){case"options":var o=j.data("options"+a.aciDelayLoad.nameSpace);return o?o:l}}}return j};var f=function(){if(j.data("customUi"+a.aciDelayLoad.nameSpace)){j.data("customUi"+a.aciDelayLoad.nameSpace,null);j.unbind(a.aciDelayLoad.nameSpace);if(j.get(0)==document){a(window).unbind(a.aciDelayLoad.nameSpace)}b()}};var h=function(){if(j.data("customUi"+a.aciDelayLoad.nameSpace)){return}j.data("customUi"+a.aciDelayLoad.nameSpace,true);m();j.bind("update"+a.aciDelayLoad.nameSpace,g);j.trigger("update")};return k()}})(jQuery);
