
/*
 * aciDelayLoad jQuery Plugin v1.1
 * http://acoderinsights.ro
 *
 * Copyright (c) 2012 Dragos Ursu
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Require jQuery Library http://jquery.com
 *
 * Date: Fri Nov 23 10:20 2012 +0200
 */

(function(a){a.aciDelayLoad={nameSpace:".aciDelayload"};a.fn.aciDelayLoad=function(b,c){if(typeof b=="string"){return a(this)._aciDelayLoad(b,c)}return this.each(function(){return a(this)._aciDelayLoad(b,c)})};a.fn.aciDelayLoad.defaults={fadeIn:0.1,duration:200,easing:"linear",dataSrc:"data-src",dataBlank:"data-blank",beforeLoad:null,afterLoad:null,resizeDelay:50,scrollDelay:100};a.fn._aciDelayLoad=function(p,f){var l=this;var n=a.extend({},a.fn.aciDelayLoad.defaults,p);var c=function(r){var q=document.documentElement;var s=r.getBoundingClientRect();return(s&&(s.bottom>=0)&&(s.right>=0)&&(s.top<=q.clientHeight)&&(s.left<=q.clientWidth))};var i=function(q){if(n.fadeIn){q.fadeTo(0,n.fadeIn)}if(n.beforeLoad){n.beforeLoad(q)}q.attr(n.dataBlank,q.attr("src")).bind("load"+a.aciDelayLoad.nameSpace,function(r){var s=a(r.target);s.unbind("load"+a.aciDelayLoad.nameSpace);s.fadeTo(n.duration,1,n.easing);if(n.afterLoad){n.afterLoad(s)}}).attr("src",q.attr(n.dataSrc)).attr(n.dataSrc,null)};var d=function(q){if(q.attr(n.dataBlank)){return}if(c(q.get(0))){i(q)}};var h=function(){l.find("img["+n.dataSrc+"]").each(function(){var q=a(this);if(q.attr(n.dataBlank)){return}if(c(this)){window.setTimeout(function(){d(q)},n.scrollDelay)}})};var k=null;var o=function(){e();l.bind("scroll"+a.aciDelayLoad.nameSpace,h);if(l.get(0)==document){a(window).bind("resize"+a.aciDelayLoad.nameSpace,function(){if(k){window.clearTimeout(k)}k=window.setTimeout(h,n.resizeDelay)})}};var e=function(){l.unbind("scroll"+a.aciDelayLoad.nameSpace);if(l.get(0)==document){a(window).unbind("resize"+a.aciDelayLoad.nameSpace)}};var b=function(){l.find("img["+n.dataBlank+"]").each(function(){var q=a(this);q.attr(n.dataSrc,q.attr("src")).attr("src",q.attr(n.dataBlank));q.attr(n.dataBlank,null)})};var m=function(){if((typeof p=="undefined")||(typeof p=="object")){l.data("options"+a.aciDelayLoad.nameSpace,n);j()}if(typeof p=="string"){if(l.data("customUi"+a.aciDelayLoad.nameSpace)){switch(p){case"enable":o();break;case"disable":e();break;case"revert":b();break;case"options":return l.data("options"+a.aciDelayLoad.nameSpace);case"destroy":g()}}else{switch(p){case"options":var q=l.data("options"+a.aciDelayLoad.nameSpace);return q?q:n}}}return l};var g=function(){if(l.data("customUi"+a.aciDelayLoad.nameSpace)){l.data("customUi"+a.aciDelayLoad.nameSpace,null);l.unbind(a.aciDelayLoad.nameSpace);if(l.get(0)==document){a(window).unbind(a.aciDelayLoad.nameSpace)}b()}};var j=function(){if(l.data("customUi"+a.aciDelayLoad.nameSpace)){return}l.data("customUi"+a.aciDelayLoad.nameSpace,true);o();l.bind("update"+a.aciDelayLoad.nameSpace,h);h()};return m()}})(jQuery);
